@{
    var active = ViewBag.ActiveMenu as string ?? string.Empty;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>@ViewData["Title"] - Origin Software's Medical Forms</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    
    <!-- Origin Software's Theme -->
    <link rel="stylesheet" href="~/css/admin-theme.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/form-builder.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/dashboard.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/submissions.css" asp-append-version="true" />
</head>

<body>
    <!-- Admin Layout -->
    <div class="admin-layout">
        
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <!-- Brand Header -->
            <div class="admin-sidebar-brand">
                <h4>Origin Software's</h4>
                <small>Medical Forms System</small>
            </div>

            <!-- Navigation -->
            <nav class="admin-sidebar-nav">
                <a href="/ViewPublicForms/Dashboard" 
                   class="admin-nav-item @(active == "Dashboard" ? "active" : "")">
                    <i class="fas fa-chart-line nav-icon"></i>
                    <span>Dashboard</span>
                </a>

            <a href="/ViewPublicForms/Create" 
                   class="admin-nav-item @(active == "FormBuilder" ? "active" : "")">
                    <i class="fas fa-layer-group nav-icon"></i>
                    <span>Form Builder</span>
                </a>


                <a href="/ViewPublicForms/Index" 
                   class="admin-nav-item @(active == "Submissions" || active == "ViewForms" ? "active" : "")">
                    <i class="fas fa-inbox nav-icon"></i>
                    <span>Submissions</span>
                </a>

                <!-- Divider -->
                <div style="height: 1px; background: var(--origin-border-light); margin: var(--space-md) var(--space-lg);"></div>

                <a href="/ViewPublicForms/FillForm" 
                   class="admin-nav-item @(active == "PublicForm" ? "active" : "")">
                    <i class="fas fa-external-link-alt nav-icon"></i>
                    <span>View Public Form</span>
                </a>
            </nav>

            <!-- Footer -->
            <div style="padding: var(--space-lg); text-align: center; font-size: var(--font-size-xs); color: var(--origin-text-muted); border-top: 1px solid var(--origin-border-light); margin-top: auto;">
                <div style="margin-bottom: var(--space-xs);">© @DateTime.Now.Year</div>
                <div style="font-weight: var(--font-weight-semibold); color: var(--origin-primary);">Origin Software's</div>
                <div style="margin-top: var(--space-xs);">All rights reserved.</div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="admin-main">
            <!-- Global Sidebar Toggle for Mobile/Desktop -->
            <button id="sidebarToggle" class="btn btn-link text-muted p-2 m-2" style="position: absolute; top: 10px; left: 10px; z-index: 1001;">
                <i class="fas fa-bars fa-lg"></i>
            </button>
            
            <div style="padding-top: 40px;">
                @RenderBody()
            </div>
        </main>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer"></div>

    <!-- Scripts -->
    <script src="~/js/toasts.js" asp-append-version="true"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var successMsg = '@TempData["SuccessMessage"]';
            var errorMsg = '@TempData["ErrorMessage"]';
            if (window.__initTempDataToasts) {
                window.__initTempDataToasts(successMsg, errorMsg);
            }

            // Sidebar Toggle Logic
            const toggle = document.getElementById('sidebarToggle');
            if(toggle) {
                toggle.addEventListener('click', function() {
                    document.body.classList.toggle('sidebar-collapsed');
                });
            }
        });
    </script>
    
    @RenderSection("Scripts", required: false)
</body>
</html>
